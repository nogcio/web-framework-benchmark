<div class="h-full rounded-2xl border border-border/70 bg-card p-5">
    <div class="flex flex-col gap-4 lg:flex-row lg:items-start lg:justify-between">
        <div class="space-y-3">
            <div class="text-xs uppercase tracking-[0.35em] text-muted-foreground">Benchmark Details</div>
            <p class="text-xs text-muted-foreground">Run {{ page.active_run_id }} · {{ page.active_env|env_title(page.environments) }} · {{ page.active_test|test_name(page.tests) }}</p>
            <div class="text-xl font-semibold">
                {{ b.language }} / {{ b.framework }}
                <span class="text-xs text-muted-foreground">v{{ b.framework_version }}</span>
            </div>
            <div class="flex flex-wrap gap-3 text-xs text-muted-foreground">
                <span>Language v{{ b.language_version }}</span>
                <span class="text-muted-foreground/60">•</span>
                <span>Database: <span class="text-foreground">{% if let Some(db) = b.database %}{{ db }}{% else %}none{% endif %}</span></span>
            </div>
            <div class="text-xs text-muted-foreground">Path: <span class="text-foreground">{{ b.path }}</span></div>
            {% if b.tags.len() > 0 %}
            <div class="pt-1 flex flex-wrap gap-2">
                {% for tag in b.tags %}
                <span class="inline-flex items-center rounded-full border border-border/60 px-2 py-1 text-[10px] font-semibold text-muted-foreground">
                    {{ tag.0 }}: {{ tag.1 }}
                </span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        {% if b.repo_url.is_some() %}
        <a href="{{ b.repo_url.as_ref().unwrap() }}" target="_blank" rel="noreferrer"
            class="inline-flex items-center gap-2 rounded-md border border-border bg-background px-3 py-2 text-xs font-semibold text-foreground shadow-sm transition hover:bg-accent hover:text-accent-foreground">
            {{ "github"|icon("h-4 w-4")|safe }}
            View code
        </a>
        {% endif %}
    </div>
    <div class="mt-5 grid grid-cols-2 md:grid-cols-4 gap-3 text-xs">
        <div class="rounded-lg border border-border/60 px-3 py-2">
            <div class="text-muted-foreground">RPS</div>
            <div class="font-semibold text-foreground">{{ b.rps|format_number }}</div>
        </div>
        <div class="rounded-lg border border-border/60 px-3 py-2">
            <div class="text-muted-foreground">TPS</div>
            <div class="font-semibold text-foreground">{{ b.tps|format_throughput }}</div>
        </div>
        <div class="rounded-lg border border-border/60 px-3 py-2">
            <div class="text-muted-foreground">Latency P99</div>
            <div class="font-semibold text-foreground">{{ b.latency_p99|format_latency_ms }}</div>
        </div>
        <div class="rounded-lg border border-border/60 px-3 py-2">
            <div class="text-muted-foreground">Errors</div>
            <div class="font-semibold text-foreground">{{ b.errors }}</div>
        </div>
    </div>
</div>
